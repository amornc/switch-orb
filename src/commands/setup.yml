description: >
  This command will separate repository name (circleci , githubactions) from your repositories-name file files and generate 2 files (circleci-repositories.yaml and github-actions-repositories.yaml).
parameters:
  working-directory:
    type: string
    default: "repositories.yaml"
    description: "separate repository name"
  file:
    type: string
    default: "."
    description: Select the path to clone into. By default the current path will be selected, which is dictated by the job's "working_directory".
  actions:
    type: string
    default: "github-actions-repositories.yaml"
    description: "github-actions-repositories.yaml file from step separate "
  circleci:
    type: string
    default: "circleci-repositories.yaml"
    description: "circleci-repositories.yaml file from step separate "
steps:
  - run:
      environment:
        PARAM_SEP: <<parameters.working-directory>>
        PARAM_DIR: <<parameters.file>>
        PARAM_FI1: <<parameters.actions>>
        PARAM_FI2: <<parameters.circleci>>
      name: separate repository name
      command: <<include(scripts/sep.sh)>>
  - run:
      environment:
        PARAM_SEP: <<parameters.working-directory>>
        PARAM_DIR: <<parameters.file>>
        PARAM_FI1: <<parameters.actions>>
        PARAM_FI2: <<parameters.circleci>>
      name: Check duplicate repository name
      command: <<include(scripts/dup.sh)>>
  - run:
      environment:
        PARAM_SEP: <<parameters.working-directory>>
        PARAM_DIR: <<parameters.file>>
        PARAM_FI1: <<parameters.actions>>
        PARAM_FI2: <<parameters.circleci>>
      name: check repository name match with project name
      command: <<include(scripts/match.sh)>>
